parameters:
    - name: subscriptionName
      type: string
    - name: resourceGroupName
      type: string
    - name: storageAccountName
      type: string

steps:
  - task: AzureCLI@2
    displayName: Update defualt action to 'Deny' in ${{ parameters.storageAccountName }}
    inputs:
      azureSubscription: '${{parameters.subscriptionName}}'
      scriptType: 'pscore'
      scriptLocation: 'inlineScript'
      inlineScript: |
        $storageAccountName = "${{ parameters.storageAccountName }}"
        $resourceGroupName = "${{ parameters.resourceGroupName }}"

        Write-Host "Starting Task: Update defualt action to 'Deny'"

        az storage account update -g $resourceGroupName --name $storageAccountName --default-action Deny